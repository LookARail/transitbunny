<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GTFS Animation</title>  
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />  
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div id="map"></div>
  <div id="tripPlotContainer">
    <canvas id="tripPlot"></canvas>
  </div>

<div id="statisticsContainer">
<div style="display: flex; justify-content: space-between; align-items: center; width: 100%; margin-bottom: 12px;">
    <h2 style="margin:0 0 10px 0; font-size:1.15rem;">Route Statistics</h2>
    <button id="GenerateStat" style="margin-bottom:12px; width:240px;">Generate Statistics</button>
    <button id="DownloadStat" style="margin-bottom:12px;">Download CSV</button>
  </div>
  <div id="routeStatsTableWrapper">
    <div id="routeStatsTable"></div>
  </div>
</div>

  <div id="controls">
  <input type="file" id="gtfsFileInput" accept=".zip" style="display:none" />
  <button id="uploadGtfsBtn">Upload GTFS ZIP</button>

  <div id="progressBarContainer" style="width:100%;margin-bottom:10px;display:none;">
    <div id="progressBar" style="height:18px;width:0%;background:#0078d7;border-radius:6px;transition:width 0.3s;"></div>
  </div>
  
  <label>
    <span class="tooltip">
      Route Type:
      <span class="tooltiptext">
        Route Type Typically has the following nomenclature:<br>1 = Subway/Metro<br>2 = Rail<br>3 = Bus<br>4 = Ferry<br>MultiSelect is available
      </span>
    </span>
    <select id="routeTypeSelect" multiple size="4" style="min-width:120px;"></select>
  </label>

  <label>
    <span class="tooltip">
      Route Name:
      <span class="tooltiptext">
        Route Name is the name of the route, such as "Red Line" or "180".<br>MultiSelect is available
      </span>
    </span>
    <select id="routeShortNameSelect" multiple size="4" style="min-width:120px;"></select>
  </label>

  <label>
    <span class="tooltip">
      Service Pattern ID:    
      <span class="tooltiptext">
        Service Pattern ID is a unique identifier for the service pattern defined in the Calendar or Calendar_date file.<br>MultiSelect is available
      </span>
    </span>
    <select id="serviceIdSelect" multiple size="4" style="min-width:120px;"></select>
  </label>


  <div class="row-controls">
    <label for="speedSelect" style="margin-bottom:0;">Speed:</label>
    <select id="speedSelect">
      <option value="1"> 1x</option>
      <option value="10" selected> 10x</option>
      <option value="60">60x</option>
      <option value="300">300x</option>
    </select>
    <span id="timeDisplay" style="margin-left: 10px; font-weight: bold;">00:00:00</span>
  </div>

  <div class="row-buttons">
    <button id="playBtn">▶️ Play</button>
    <button id="pauseButton">Pause</button>
    <button id="stopBtn">⏹️ Stop</button>
  </div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Your main GTFS JS -->
  <script src= "https://cdn.jsdelivr.net/npm/fflate/umd/index.js"></script>
  <script src="main.js"></script>
  <script src="analysis.js"></script>
</body>
</html>
